<!--pages/session/list.wxml-->
<view class="container">
  <!-- çŠ¶æ€ç­›é€‰æ  -->
  <view class="status-bar">
    <view class="status-tabs">
      <view
        class="status-tab {{activeStatus === '' ? 'active' : ''}}"
        bindtap="selectStatus"
        data-status="">
        å…¨éƒ¨
      </view>
      <view
        class="status-tab {{activeStatus === 'completed' ? 'active' : ''}}"
        bindtap="selectStatus"
        data-status="completed">
        å·²å®Œæˆ
      </view>
      <view
        class="status-tab {{activeStatus === 'pending' ? 'active' : ''}}"
        bindtap="selectStatus"
        data-status="pending">
        å¾…å®Œæˆ
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && sessionList.length === 0}}">
    <view class="empty-icon">ğŸ“</view>
    <view class="empty-text">æš‚æ— è¯¾ç¨‹è®°å½•</view>
    <view class="empty-hint">å®Œæˆè¯¾ç¨‹åä¼šåœ¨è¿™é‡Œæ˜¾ç¤º</view>
  </view>

  <!-- è¯¾ç¨‹åˆ—è¡¨ -->
  <view class="session-list" wx:if="{{!loading}}">
    <view
      class="session-card"
      wx:for="{{sessionList}}"
      wx:key="_id"
      bindtap="viewDetail"
      data-id="{{item._id}}">

      <!-- å¡ç‰‡å¤´éƒ¨ -->
      <view class="card-header">
        <view class="coach-info">
          <image class="coach-avatar" src="{{item.coachAvatar}}" mode="aspectFill"></image>
          <view class="coach-details">
            <view class="coach-name">{{item.coachName}}</view>
            <view class="session-time">
              <text class="time-icon">â°</text>
              <text>{{item.startTime}}-{{item.endTime}}</text>
            </view>
          </view>
        </view>
        <view class="session-date">
          <view class="date-day">{{item.dateText.day}}</view>
          <view class="date-month">{{item.dateText.month}}æœˆ</view>
        </view>
      </view>

      <!-- çŠ¶æ€æ ‡ç­¾ -->
      <view class="status-badge status-{{item.status}}">
        {{item.statusText}}
      </view>

      <!-- è¯¾ç¨‹å†…å®¹ -->
      <view class="session-content" wx:if="{{item.sessionContent}}">
        <view class="content-title">è¯¾ç¨‹å†…å®¹</view>
        <view class="content-text">{{item.sessionContent}}</view>
      </view>
      <view class="session-content" wx:else>
        <view class="content-title">è¯¾ç¨‹å†…å®¹</view>
        <view class="no-content">æš‚æ— å†…å®¹</view>
      </view>

      <!-- åé¦ˆè¯„åˆ† -->
      <view class="session-rating" wx:if="{{item.rating}}">
        <view class="rating-label">è¯¾ç¨‹è¯„åˆ†</view>
        <view class="rating-stars">
          <text class="star {{item.rating >= 1 ? 'filled' : ''}}">â˜…</text>
          <text class="star {{item.rating >= 2 ? 'filled' : ''}}">â˜…</text>
          <text class="star {{item.rating >= 3 ? 'filled' : ''}}">â˜…</text>
          <text class="star {{item.rating >= 4 ? 'filled' : ''}}">â˜…</text>
          <text class="star {{item.rating >= 5 ? 'filled' : ''}}">â˜…</text>
        </view>
      </view>

      <!-- å¡ç‰‡åº•éƒ¨ -->
      <view class="card-footer">
        <view class="venue-info" wx:if="{{item.venue}}">
          <text class="venue-icon">ğŸ“</text>
          <text>{{item.venue}}</text>
        </view>
        <button class="action-btn" size="mini">æŸ¥çœ‹è¯¦æƒ…</button>
      </view>
    </view>
  </view>
</view>