<!--pages/booking/coach-list.wxml-->
<view class="coach-list-container">
  <!-- ç­›é€‰æ’åºæ  - ç°ä»£è®¾è®¡ -->
  <view class="filter-section">
    <view class="filter-chip {{specialtyName === 'å…¨éƒ¨' ? 'active' : ''}}" bindtap="showFilter">
      <text class="chip-icon">ğŸ¯</text>
      <text class="chip-text">{{specialtyName}}</text>
      <text class="chip-arrow">â–¼</text>
    </view>
    <view class="filter-chip {{sortName === 'ç»¼åˆæ’åº' ? 'active' : ''}}" bindtap="showSort">
      <text class="chip-icon">âš¡</text>
      <text class="chip-text">{{sortName}}</text>
      <text class="chip-arrow">â–¼</text>
    </view>
  </view>

  <!-- æ•™ç»ƒåˆ—è¡¨ -->
  <view class="coach-list" wx:if="{{!loading && filteredList.length > 0}}">
    <view class="coach-item" wx:for="{{filteredList}}" wx:key="_id">
      <view class="coach-card">
        <!-- å¡ç‰‡å¤´éƒ¨èƒŒæ™¯ -->
        <view class="card-header-bg"></view>

        <!-- å¡ç‰‡å†…å®¹ -->
        <view class="card-content">
          <!-- æ•™ç»ƒå¤´åƒ -->
          <view class="avatar-wrapper">
            <image lazy-load class="coach-avatar" src="{{item.avatarUrl || '/images/avatar.png'}}" mode="aspectFill"></image>
            <!-- <view class="avatar-ring"></view> -->
          </view>

          <!-- æ•™ç»ƒä¿¡æ¯ -->
          <view class="coach-info">
            <view class="coach-name-row">
              <text class="coach-name">{{item.name || 'æ•™ç»ƒ'}}</text>
              <view class="rating-badge">
                <text class="rating-star">â˜…</text>
                <text class="rating-text">{{item.rating || '5.0'}}</text>
              </view>
            </view>

            <!-- ä¸“é•¿æ ‡ç­¾ -->
            <view class="coach-tags" wx:if="{{item.specialty && item.specialty.length > 0}}">
              <text class="tag" wx:for="{{item.specialty}}" wx:for-item="tag" wx:key="*this">{{tag}}</text>
            </view>

            <!-- è¯„ä»·ä¿¡æ¯ -->
            <view class="coach-meta">
              <view class="meta-item">
                <text class="meta-icon">ğŸ’¬</text>
                <text class="meta-text">{{item.reviewCount || 0}}æ¡è¯„ä»·</text>
              </view>
            </view>
          </view>
        </view>

        <!-- å¡ç‰‡åº•éƒ¨ - æ“ä½œæŒ‰é’® -->
        <view class="card-actions">
          <button class="detail-btn" catchtap="viewCoachDetail" data-id="{{item._id}}">
            <text class="btn-icon">ğŸ‘¤</text>
            <text>æŸ¥çœ‹è¯¦æƒ…</text>
          </button>
          <button class="book-btn" catchtap="bookNow" data-id="{{item._id}}">
            <text class="btn-icon">ğŸ“…</text>
            <text>ç«‹å³é¢„çº¦</text>
          </button>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view class="loading-state" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && filteredList.length === 0}}">
    <text class="empty-icon">ğŸ‘¨â€ğŸ«</text>
    <text class="empty-text">æš‚æ— æ•™ç»ƒ</text>
    <text class="empty-hint">è¯·ç¨åå†è¯•</text>
  </view>
</view>
