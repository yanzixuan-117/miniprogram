<!--pages/admin/student-courses/student-courses.wxml-->
<view class="courses-container">
  <view class="header">
    <text class="student-name">{{studentName}}</text>
    <text class="course-count">å…±{{courseList.length}}ä¸ªè¯¾ç¨‹</text>
  </view>

  <!-- æ·»åŠ è¯¾ç¨‹æŒ‰é’® -->
  <view class="add-course-section">
    <button class="add-course-btn" bindtap="addCourse">
      <text class="btn-icon">+</text>
      <text class="btn-text">æ·»åŠ è¯¾ç¨‹</text>
    </button>
  </view>

  <!-- è¯¾ç¨‹åˆ—è¡¨ -->
  <view class="course-list" wx:if="{{!loading && courseList.length > 0}}">
    <view class="course-item" wx:for="{{courseList}}" wx:key="_id">
      <view class="course-header">
        <text class="course-name">{{item.courseName}}</text>
        <view class="course-status status-{{item.status}}">
          {{item.status === 'active' ? 'æœ‰æ•ˆ' : (item.status === 'expired' ? 'å·²è¿‡æœŸ' : 'å·²å®Œæˆ')}}
        </view>
      </view>

      <view class="course-info">
        <view class="info-row">
          <text class="info-label">æ€»è¯¾æ¬¡</text>
          <text class="info-value">{{item.totalSessions}}æ¬¡</text>
        </view>
        <view class="info-row">
          <text class="info-label">å·²ä½¿ç”¨</text>
          <text class="info-value">{{item.usedSessions}}æ¬¡</text>
        </view>
        <view class="info-row">
          <text class="info-label">å‰©ä½™</text>
          <text class="info-value highlight">{{item.remainingSessions}}æ¬¡</text>
        </view>
        <view class="info-row">
          <text class="info-label">ç»“æŸæ—¥æœŸ</text>
          <text class="info-value">{{item.endDate}}</text>
        </view>
      </view>

      <view class="course-progress" wx:if="{{item.status === 'active'}}">
        <view class="progress-bar">
          <view class="progress-fill" style="width: {{item.remainingPercent}}%"></view>
        </view>
        <text class="progress-text">å‰©ä½™ {{item.remainingSessions}}/{{item.totalSessions}} è¯¾æ—¶</text>
      </view>

      <view class="course-coach" wx:if="{{item.coachName}}">
        <text class="coach-label">æŒ‡å®šæ•™ç»ƒï¼š</text>
        <text class="coach-name">{{item.coachName}}</text>
      </view>

      <view class="course-notes" wx:if="{{item.notes}}">
        <text class="notes-label">å¤‡æ³¨ï¼š</text>
        <text class="notes-text">{{item.notes}}</text>
      </view>

      <view class="course-actions">
        <button
          class="action-btn delete-btn"
          bindtap="deleteCourse"
          data-course-id="{{item._id}}"
          data-course-name="{{item.courseName}}">
          åˆ é™¤è¯¾ç¨‹
        </button>
      </view>
    </view>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view class="loading-container" wx:if="{{loading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-container" wx:if="{{!loading && courseList.length === 0}}">
    <text class="empty-icon">ğŸ“š</text>
    <text class="empty-text">æš‚æ— è¯¾ç¨‹</text>
  </view>
</view>
