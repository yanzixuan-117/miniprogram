<!-- pages/admin/venue-manage/venue-manage.wxml -->
<view class="container">
  <!-- é¡¶éƒ¨æ“ä½œæ  -->
  <view class="top-bar">
    <text class="venue-count">{{venueList.length}} ä¸ªçƒé¦†</text>
    <view class="add-btn-mini" bindtap="goToAddVenue">
      <text class="add-icon">æ·»åŠ </text>
    </view>
  </view>

  <!-- çƒé¦†åˆ—è¡¨ -->
  <view class="venue-list" wx:if="{{!loading}}">
    <view
      class="venue-item"
      wx:for="{{venueList}}"
      wx:key="_id"
    >
      <!-- çƒé¦†å›¾ç‰‡ -->
      <image
        class="venue-image"
        src="{{item.imageList && item.imageList.length > 0 ? item.imageList[0] : item.imageUrl}}"
        mode="aspectFill"
        wx:if="{{item.imageList && item.imageList.length > 0 || item.imageUrl}}"
      ></image>
      <view class="venue-image-placeholder" wx:else>
        <text class="placeholder-icon">ğŸŸï¸</text>
      </view>
      <view class="image-count" wx:if="{{item.imageList && item.imageList.length > 1}}">
        <text>{{item.imageList.length}}å¼ </text>
      </view>

      <!-- çƒé¦†ä¿¡æ¯ -->
      <view class="venue-info">
        <view class="venue-header">
          <text class="venue-name">{{item.name}}</text>
          <view class="status-badge {{item.status === 1 ? 'active' : 'inactive'}}">
            <text>{{item.status === 1 ? 'â— è¥ä¸šä¸­' : 'â—‹ å·²åœç”¨'}}</text>
          </view>
        </view>

        <view class="venue-details">
          <view class="detail-row" wx:if="{{item.address}}">
            <text class="detail-label">ğŸ“ åœ°å€</text>
            <text class="detail-value">{{item.address}}</text>
          </view>
          <view class="detail-row" wx:if="{{item.operatingHours}}">
            <text class="detail-label">â° æ—¶é—´</text>
            <text class="detail-value">{{item.operatingHours.open}} - {{item.operatingHours.close}}</text>
          </view>
          <view class="detail-row" wx:if="{{item.description}}">
            <text class="detail-label">ğŸ“ æè¿°</text>
            <text class="detail-value">{{item.description}}</text>
          </view>
        </view>

        <!-- æ“ä½œæŒ‰é’® -->
        <view class="action-buttons">
          <button
            class="action-btn edit-btn"
            bindtap="goToEditVenue"
            data-id="{{item._id}}"
          >
            âœï¸ ç¼–è¾‘
          </button>
          <button
            class="action-btn status-btn"
            bindtap="toggleStatus"
            data-id="{{item._id}}"
            data-status="{{item.status}}"
            data-name="{{item.name}}"
          >
            {{item.status === 1 ? 'â¸ åœç”¨' : 'â–¶ï¸ å¯ç”¨'}}
          </button>
          <button
            class="action-btn delete-btn"
            bindtap="deleteVenue"
            data-id="{{item._id}}"
            data-name="{{item.name}}"
          >
            ğŸ—‘ï¸ åˆ é™¤
          </button>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{venueList.length === 0}}">
      <text class="empty-icon">ğŸŸï¸</text>
      <text class="empty-text">æš‚æ— çƒé¦†</text>
      <text class="empty-hint">ç‚¹å‡»å³ä¸Šè§’ã€Œæ·»åŠ çƒé¦†ã€æŒ‰é’®å¼€å§‹æ·»åŠ </text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>
</view>
